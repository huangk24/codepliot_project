<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chatroom</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
  <nav class="navbar sticky-top navbar-light bg-white shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold" href="/">Chatroom</a>

      <div class="dropdown">
        <a class="d-flex align-items-center text-decoration-none dropdown-toggle" href="#" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <div id="navAvatar" class="rounded-circle" style="width:36px;height:36px;background:linear-gradient(90deg,#833ab4,#dd2a7b);display:flex;align-items:center;justify-content:center;color:white;font-weight:700"></div>
        </a>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
          <li><h6 class="dropdown-header" id="navUsername">User</h6></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item text-danger" href="#" id="logoutLink">Logout</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="chat-container">
    <header>
      <div style="display:flex;align-items:center;gap:8px">
        <button id="backBtn" class="btn btn-outline-secondary btn-sm d-none">← Back</button>
        <div id="who" class="me-2"></div>
      </div>
    </header>

    <div class="d-flex gap-3" style="flex:1;align-items:stretch;">
      <aside style="width:220px;">
        <div class="card p-3" style="height:100%;">
          <h6 class="mb-1">Users</h6>
          <div class="text-muted" style="font-size:0.85rem;margin-bottom:10px;">
            <span class="status-dot online"></span> Online · <span class="status-dot offline"></span> Offline
          </div>
          <ul id="usersList" class="list-unstyled mb-0"></ul>
        </div>
      </aside>

      <section style="flex:1;display:flex;flex-direction:column;">
        <ul id="messages" class="messages" style="flex:1"></ul>

        <form id="msgForm" class="msgForm">
          <input id="msgInput" class="form-control" autocomplete="off" placeholder="Type a message..." />
          <button class="btn btn-primary w-100 mt-2">Send</button>
        </form>
      </section>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/chat.js"></script>
</body>
</html>
